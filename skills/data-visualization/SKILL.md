---
name: data-visualization
description: "시각화 작업 시 차트 유형 선택 매트릭스 강제, 색각 이상 안전 팔레트 의무화, data-ink ratio 강제, 반응형 크기 요구"
user-invocable: true
allowed-tools:
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - Bash
  - WebSearch
---

# 데이터 시각화 워크플로우

> 차트를 먼저 그리지 않는다. 데이터 질문 유형을 먼저 분류하고, 선택 매트릭스에 따라 차트 유형을 결정한 뒤 구현한다.

## 게이트 (반드시 먼저)

코드를 작성하기 전에 반드시 완료해야 하는 선행 조건.
통과하지 않으면 다음 단계로 진행하지 않는다.

- [ ] 데이터 질문 유형 분류 완료: 비교 / 추세 / 분포 / 비율 / 상관관계 중 하나를 명시
- [ ] 차트 유형 매트릭스 적용 완료:
  - 비교 → 수평/수직 막대 차트
  - 추세 → 라인/영역 차트
  - 분포 → 히스토그램, 박스 플롯
  - 비율 → 도넛 차트(5개 이하), 트리맵(6개 이상)
  - 상관관계 → 산점도
- [ ] 사용 중인 시각화 라이브러리 확인 (Recharts / Chart.js / D3.js)
- [ ] 디자인 시스템 색상 팔레트와 다크 모드 지원 여부 확인

## 규칙 (항상 따라야 함)

1. **색각 이상 안전 팔레트 의무**: 색상 팔레트는 반드시 파란-주황 계열 기반(`#2563eb`, `#f97316`)을 사용한다. 무지개 팔레트(rainbow palette)는 절대 사용하지 않는다.
2. **WCAG 명도 대비 준수**: 차트의 텍스트와 배경 대비는 WCAG 2.1 AA 기준 4.5:1 이상이어야 한다.
3. **3D 효과 절대 금지**: 3D 차트, 그라데이션 fill, 그림자 효과는 데이터를 왜곡한다. 항상 2D 평면으로 렌더링한다.
4. **Y축 0 시작 강제 (막대 차트)**: 막대 차트의 Y축은 반드시 0에서 시작한다. 잘린 축(truncated axis)은 차이를 과장한다.
5. **파이 차트 6개 이상 금지**: 카테고리가 6개를 초과하면 파이/도넛 차트를 사용하지 않는다. 수평 막대 또는 트리맵으로 대체한다.
6. **이중 Y축 금지**: 두 지표를 하나의 차트에 이중 Y축으로 표현하지 않는다. 별도 차트로 분리하거나 정규화 비교를 사용한다.
7. **반응형 크기 의무**: 모든 차트는 `ResponsiveContainer` 또는 이에 준하는 방식으로 컨테이너 너비에 반응하도록 구현한다. 고정 픽셀 너비를 사용하지 않는다.
8. **인버티드 피라미드 레이아웃**: 대시보드는 상단 KPI 카드 → 중간 트렌드 차트 → 하단 상세 테이블 순서를 따른다.
9. **맥락 없는 단독 숫자 금지**: KPI 수치 옆에는 반드시 전월 대비, 목표 달성률, 변화 추세 중 하나 이상을 함께 표시한다.

## 완료 체크리스트 (통과해야 완료)

작업 완료 전 반드시 확인. 하나라도 실패하면 완료 아님.

- [ ] 차트 유형이 데이터 질문 유형 매트릭스에 따라 선택되었는가
- [ ] 색상 팔레트가 파란-주황 기반 색각 이상 안전 팔레트인가
- [ ] 3D 효과, 그라데이션, 그림자가 없는가
- [ ] 막대 차트의 Y축이 0에서 시작하는가
- [ ] 도넛/파이 차트의 카테고리가 5개 이하인가 (초과 시 다른 차트로 대체되었는가)
- [ ] 모든 차트가 반응형(ResponsiveContainer 등)으로 구현되었는가
- [ ] KPI 카드에 전월 대비 또는 목표 대비 맥락이 포함되었는가
- [ ] 대시보드 레이아웃이 KPI → 트렌드 → 상세 순서를 따르는가
